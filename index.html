<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>training.js</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/github.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h1>training.JS</h1>
					<h3>JavaScript, Node, BDD, patterns and more...</h3>
					<p>
						<small><a href="http://twitter.com/jbpros">@jbpros</a></small>
					</p>
          <p style="opacity:.5"><small>Disclaimer: contains lots of ponies.</small></p>
				</section>

        <section>
          <section>
            <h2>JavaScript: the basics</h2>
          </section>

          <section>
            <h3>Primitive types</h3>
          </section>

          <section>
            <p><em>Value</em> types, passed by value</p>
          </section>


          <section>
            <h4>Boolean</h4>
            <pre><code class="javascript">var itIs = true;

var itIsNot = false;

itIs && itIsNot; // => false</code></pre>
          </section>

          <section>
            <h4>Number</h4>
            <pre><code class="javascript">var two = 2; // integer

var six = Number(6);

two * six; // => 12

var twoAndBits = 2.233; // double or float

var octalNumber = 0777; // 511

var hexNumber = 0xfff; // 4095

var notANumber = Number("lolz"); // NaN

12 / 0; // => Infinity

-12 / 0; // => -Infinity</pre></code>
          </section>

          <section>
            <h4>String</h4>
            <pre><code class="javascript">var name = "Frodo Baggins";

var friend = String("Samwise Gamgee");

name + " and " + friend; // => "Frodo Baggins and Samwise Gamgee"</code></pre>
          </section>

          <section>
            <h3>Complex types</h3>
            <p>a.k.a. <em>objects</em></p>
          </section>

          <section>
            <h4>Array</h4>
            <pre><code class="javascript">var heights = new Array(12, 23, 456);

heights[1]; // => 23

heights[0] = 100;

var moreHeights = [23, 456, 14];

heights.concat(moreHeights); // => [100, 23, 456, 23, 456, 14]</code></pre>
          </section>

          <section>
            <h4>Object</h4>
            <pre><code class="javascript">var dog = new Object();

dog.name = "Bobby";

dog; // => { name: "Bobby" }



var cat = { name: "Fluffy" };

cat.name; // => "Fluffy"

cat["name"]; // => "Fluffy"</code></pre>
          </section>

          <!-- <section>
            <h3>Operators</h3>
          </section>

          <section>
            <h4>Arithmetic operators</h4>
            <pre><code class="javascript">var a = 12 + 5; // 17

var b = 12 - 5; // 7

var c = 12 * 5; // 60

var d = 12 / 6; // 2

var e = 12 / 5; // 2.4 - integer divisions can result in doubles

var f = 12 % 5; // 2 - the remainder of 12/5 in integer math is 2</code></pre>
          </section>

          <section>
            <h5>Unary operators</h5>
            <p>Cast to numbers</p>
            <pre><code class="javascript">var a = "1";

var b = +a;  // 1

var c = -a;  // -1</code></pre>
          </section>

          <section>
            <h4>Bitwise operators</h4>
            <p><code>&</code> <code>|</code> <code>^</code> <code>~</code> <code>>></code> <code><<</code> <code>>>></code></p>
          </section>

          <section>
            <h4>Assignment operators</h4>
            <p>TODO</p>
            <p>See <a href="http://en.wikibooks.org/wiki/JavaScript/Operators">en.wikibooks.org/wiki/JavaScript/Operators</a> for more...</p>
          </section> -->

          <!--
           TODO: expression vs. statement
          -->

          <section>
            <h4>Errors and exceptions</h4>
            <pre><code class="javascript">throw "An ugly error";
console.log("This won't ever run.");</code></pre>
            <pre><code class="no-highlight">An ugly error</code></pre>
          </section>

          <section>
            <pre><code class="javascript">throw new Error("An ugly error");</code></pre>
            <pre><code class="no-highlight">Error: An ugly error
    at Object.<anonymous> (/Users/jbpros/tmp/file.js:1:69)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9)</code></pre>
          </section>

          <section>
            <pre><code class="javascript">try {
  throw new Error("An ugly error");
} catch (err) {
  console.log("Error:", err);
} finally {
  console.log("Done"); // always run
}</code></pre>
            <pre><code class="no-highlight">Error: [Error: An ugly error]
Done</code></pre>
          </section>
        </section>

        <section>
          <section>
            <h2>JavaScript: functions</h2>
            <p>JavaScript's first-class citizens</p>
          </section>

          <section>
            <h3>Named functions</h3>
            <pre><code class="javascript">function sum(a, b) {
  return a + b;
};

sum(2, 4); // => 6</code></pre>
          </section>

          <section>
            <h3>Anonymous functions</h3>
            <pre><code class="javascript">var sum = function (a, b) {
  return a + b;
};

sum(2, 4); // => 6</code></pre>
          </section>

          <section>
            <h3>Variable scope</h3>
            <pre><code class="javascript">function sum(a, b) {
  var c = a + b;
  return c;
};

var c = 2;
var d = 3;

sum(c, d);<span class="fragment"> // => 5</span>
<span class="fragment">
c;<span class="fragment"> // => 2</span></span></code></pre>
          </section>

          <section>
            <h3>Scope chain</h3>
            <pre><code class="javascript">function sum(a, b) {
  c = a + b;
  return c;
};

var c = 2;
var d = 3;

sum(c, d);<span class="fragment roll-in"> // => 5</span>
<span class="fragment">
c;<span class="fragment"> // => 5</span></code></span></pre>
          </section>

          <section>
            <h3>Global scope</h3>
            <pre><code class="javascript">function a() { myGlobal = 42; }

myGlobal;<span class="fragment"> // => ReferenceError: myGlobal is not defined</span>

a();

myGlobal;<span class="fragment"> // => 42</span></code></pre>
          </section>

          <section>
            <p>Don't use global variables.</p>
          </section>

          <section>
            <h3>Closures</h3>
            <pre><code class="javascript">function incrementer(a) {
  function sum(n) {
    var result = a + n;
    a++;
    return result;
  }
  return sum;
}

var increment = incrementer(5);
increment(2);<span class="fragment"> // => 7</span>
<span class="fragment">increment(2);<span class="fragment"> // => 8</span></span>
<span class="fragment">increment(1);<span class="fragment"> // => 8</span></span>
<span class="fragment">increment(3);<span class="fragment"> // => 11</span></span></pre></code>
          </section>

          <section>
            <h3>Callbacks</h3>
            <p>This is ubiquitous in Node.js</p>
            <pre><code class="javascript">function cuddlePoneys(callback) {
  // do the cuddling, assume we end up having
  // a poneyCount variable:
  callback(poneyCount);
}

cuddlePoneys(function (numberOfCuddledPoneys) {
   console.log(numberOfCuddledPoneys + " poneys were cuddled.");
});</pre></code>
          </section>
        </section>

        <!-- TODO: function and var hoisting -->

        <section>
          <section>
            <h2>Object-Oriented Programming</h2>
            <p>Yes, <strong>JavaScript is</strong> an <strong>awesome OOP</strong> language.</p>
          </section>

          <section>
            <h3>The <code>new</code> keyword</h3>
            <pre><code class="javascript">var poney = new Object();
poney; // => {}

poney.name = "Rainbow Dash";
poney; // => { color: "Rainbow Dash" }</code></pre>
          </section>

          <section>
            <h3>The <code>this</code> keyword</h3>
            <pre><code class="javascript">var poney = {
  name: "Rainbow Dash",
  introduce: function () {
    return "Hi, my name is " + this.name + "!";
  }
};

poney.introduce(); // => "Hi, my name is Rainbow Dash!"</code></pre>
          </section>

          <section>
            <h3>Constructors</h3>
            <pre><code class="javascript">function Poney(name) {
  this.name = name;
}

var poney = new Poney("Fancy Pants");

poney; // => { name: "Fancy Pants" }</code></pre>
          </section>

          <section>
            <p>What if we drop <code>new</code>?</p>
            <pre><code class="javascript">function Poney(name) {
  this.name = name;
}

var poney = Poney("Fancy Pants");

poney;<span class="fragment">           // => undefined</span>
<span class="fragment">name;<span class="fragment">            // => "Fancy Pants"</span></span>
<span class="fragment">this === global; // => true</span>
<span class="fragment">this.name;       // => "Fancy Pants"</span></code></pre>
          </section>

          <section>
            <p>Remember what we said about <em>globals</em>?</p>
          </section>

          <section>
            <h4>Access constructor</h4>
            <pre><code class="javascript">function Poney() { }

var poney = new Poney();

poney.constructor; // => [Function: Poney]</code></pre>
          </section>

          <section>
            <h4>How does <code>new</code> really work?</h4>
            <pre><code class="javascript">function Poney(name) {
  this.name = name;
}
var poney = new Poney("Rainbow Dash");
<span class="fragment">// is the same as:
var poney = {};
Poney.call(poney, "Rainbow Dash");</span></pre></code>
          </section>

          <section>
            <h4>Methods as members</h4>
            <pre><code class="javascript">function Poney(name) {
  this.name = name;
  this.introduce = function () {
    return "Hi, my name is " + this.name + "!";
  }
}

var poney = new Poney("Fancy Pants");

poney;             // => { name: 'Fancy Pants',
                   //      introduce: [Function] }

poney.introduce(); // => "Hi, my name is Fancy Pants!"</code></pre>
          </section>

          <section>
            <h3>Prototypes</h3>
            <pre><code class="javascript">function Poney(name) {
  this.name = name;
}

Poney.prototype.introduce = function () {
  return "Hi, my name is " + this.name + "!";
};

var poney1 = new Poney("Fancy Pants");
var poney2 = new Poney("Rainbow Dash");

poney1;<span class="fragment">             // => { name: "Fancy Pants" }</span>
poney1.introduce();<span class="fragment"> // => "Hi, my name is Fancy Pants!"</span>
poney2.introduce();<span class="fragment"> // => "Hi, my name is Rainbow Dash!"</span></code></pre>
          </section>

          <section>
            <p>Prototype methods can't share private data.</p>
          </section>

          <section>
            <h4>Dynamically extending objects</h4>
            <pre><code class="javascript">function Poney(name) {
  this.name = name;
}

var poney = new Poney("Fancy Pants");
poney.gender; // => undefined

<span class="fragment">Poney.prototype.gender = "unspecified";

<span class="fragment">poney.gender; // => "unspecified"</span>
<span class="fragment">poney.gender = "female";
poney.gender; // => "female"</span>
<span class="fragment">delete poney.gender;
poney.gender; // => "unspecified"</span></span></pre></code>
            <p class="fragment">A bit like reopening classes in Ruby, hu? (:</p>
          </section>

          <section>
            <h3>Closures as constructors</h3>
            <pre><code class="javascript">function Poney(name) {
  var birth = Date.now();<span class="fragment"> // Look ma, private members!</span>

  var self = { name: name };

  self.introduce = function () {
    return "Hi, my name is " + self.name + "!";
  };

  return self;
}

var poney = Poney("Apple Bloom");</pre></code>
            <p class="fragment"><3</p>
          </section>

          <section>
            <p>Slower than prototypes</p>
          </section>

          <section>
            <h3>Inheritance</h3>
          </section>

          <section>
            <h4>Prototypal inheritance</h4>
            <pre><code class="javascript">function Horse() { }
Horse.prototype.introduce = function () {
  return "Hi, my name is " + this.name + "!";
};

function Poney(name) {
  this.name = name;
}
Poney.prototype = new Horse();

var poney = new Poney("Rainbow Dash");

poney.introduce(); // => "Hi, my name is Rainbow Dash!"</pre></code>
          </section>

          <section>
            <h4>Closure-based inheritance</h4>
            <pre><code class="javascript">function Horse(name) {
  var self = { name: name };

  self.introduce = function () {
    return "Hi, my name is " + this.name + "!";
  };
  return self;
}

function Poney(name) {
  var self = new Horse(name);
  return self;
}

var poney = new Poney("Rainbow Dash");

poney.introduce(); // => "Hi, my name is Rainbow Dash!"</pre></code>
          </section>

          <section>
            <p>The story does not end here, there are other techniques.</p>
            <p><a href="http://google.com/?q=javascript%20inheritance%20techniques">Google</a> is your friend (and so am I).</p>
          </section>
        </section>

        <section>
          <section>
            <h2>Node.js</h2>
          </section>

          <section>
            <h3>An asynchronous world</h3>
            <p><q>Node.js uses an event-driven, non-blocking I/O model (...)</q><p>
          </section>

          <section>
            <pre><code class="javascript">var fs = require('fs');

function cuddlePoneys(callback) {
  var poneyCount = 3;
  fs.writeFile('poney_cuddling.log', poneyCount, function (err) {
    if (err)
      throw err;
    callback(poneyCount);
  });
}

cuddlePoneys(function (numberOfCuddledPoneys) {
   console.log(numberOfCuddledPoneys + " poneys were cuddled.");
});</pre></code>
          </section>

          <section>
            <h3>The event loop</h3>
            <pre><code class="javascript">fs.writeFile('poney_cuddling.log', poneyCount, function (err) {
  // ...
});</pre></code>
          </section>

          <section>
            <pre><code class="javascript">setTimeout(function () {
  console.log("ERMAHGERD PERNEYS 11!!11");
}, 1000);</pre></code>
          </section>

          <section>
            <pre><code class="javascript">process.nextTick(function () {
  console.log("ERMAHGERD PERNEYS 11!!11");
});</pre></code>
          </section>

          <section>
            <h3>Errors and exceptions</h3>
            <pre><code class="javascript">function cuddlePoneys(callback) {
  var poneyCount = 3;
  fs.writeFile('/some/invalid/path', poneyCount, function (err) {
    if (err)
      throw err;
    callback(poneyCount);
  });
}

try {
  cuddlePoneys(function (numberOfCuddledPoneys) {
    console.log(numberOfCuddledPoneys + " poneys were cuddled.");
  });
} catch (err) {
  console.log("Error", err); // will never fire :(
}</pre></code>
          </section>

          <section>
            <p>Be civilized, don't throw anything.</p>
          </section>

          <section>
            <pre><code class="javascript">function cuddlePoneys(callback) {
  var poneyCount = 3;
  fs.writeFile('/some/invalid/path', poneyCount, function (err) {
    if (err)
      callback(err);
    else
      callback(null, poneyCount);
  });
}

cuddlePoneys(function (err, numberOfCuddledPoneys) {
  if (err)
    return console.log("Error", err);

  console.log(numberOfCuddledPoneys + " poneys were cuddled.");
});</pre></code>
          </section>

          <section>
            <h3>Modules</h3>
            <pre><code class="javascript">var util = require("util");

var fancy = { name: "Fancy Pants" };
var poney = { name: "Rainbow Dash", mum: fancy};

util.inspect(poney);
// => "{ name: \"Rainbow Dash\", mum: { name: \"Fancy Pants\" } }"</code></pre>
          </section>

          <section>
            <h4>CommonJS</h4>
            <p>A set of JavaScript specifications concerning packages, modules, unit testing, console, and more.</p>
          </section>
        </section>

        <section>
          <p>That's enough slides, right?</p>
          <p><small>Admittedly, I faced a lack of time to prepare the rest of it.</small></p>
        </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme || "beige", // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || "default", // default/cube/page/concave/zoom/linear/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
